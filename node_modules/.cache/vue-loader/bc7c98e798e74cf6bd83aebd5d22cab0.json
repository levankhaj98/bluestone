{"remainingRequest":"/home/levankhai/Downloads/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/levankhai/Downloads/test/src/components/Card.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/levankhai/Downloads/test/src/components/Card.vue","mtime":1611152904220},{"path":"/home/levankhai/Downloads/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/levankhai/Downloads/test/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/levankhai/Downloads/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/levankhai/Downloads/test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FyZCcsCiAgcHJvcHM6IHsKICAgIGxhYmVsczogT2JqZWN0LAogICAgZmllbGRzOiBPYmplY3QsCiAgICBpc0NhcmROdW1iZXJNYXNrZWQ6IEJvb2xlYW4sCiAgICByYW5kb21CYWNrZ3JvdW5kczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYmFja2dyb3VuZEltYWdlOiBbU3RyaW5nLCBPYmplY3RdCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvY3VzRWxlbWVudFN0eWxlOiBudWxsLAogICAgICBjdXJyZW50Rm9jdXM6IG51bGwsCiAgICAgIGlzRm9jdXNlZDogZmFsc2UsCiAgICAgIGlzQ2FyZEZsaXBwZWQ6IGZhbHNlLAogICAgICBhbWV4Q2FyZFBsYWNlaG9sZGVyOiAnIyMjIyAjIyMjIyMgIyMjIyMnLAogICAgICBkaW5lcnNDYXJkUGxhY2Vob2xkZXI6ICcjIyMjICMjIyMjIyAjIyMjJywKICAgICAgZGVmYXVsdENhcmRQbGFjZWhvbGRlcjogJyMjIyMgIyMjIyAjIyMjICMjIyMnLAogICAgICBjdXJyZW50UGxhY2Vob2xkZXI6ICcnCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudEZvY3VzICgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudEZvY3VzKSB7CiAgICAgICAgdGhpcy5jaGFuZ2VGb2N1cygpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb2N1c0VsZW1lbnRTdHlsZSA9IG51bGwKICAgICAgfQogICAgfSwKICAgIGNhcmRUeXBlICgpIHsKICAgICAgdGhpcy5jaGFuZ2VQbGFjZWhvbGRlcigpCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuY2hhbmdlUGxhY2Vob2xkZXIoKQoKICAgIGxldCBzZWxmID0gdGhpcwogICAgbGV0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNhcmQtZmllbGRdJykKICAgIGZpZWxkcy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gewogICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZQogICAgICAgIGlmIChlbGVtZW50LmlkID09PSB0aGlzLmZpZWxkcy5jYXJkWWVhciB8fCBlbGVtZW50LmlkID09PSB0aGlzLmZpZWxkcy5jYXJkTW9udGgpIHsKICAgICAgICAgIHRoaXMuY3VycmVudEZvY3VzID0gJ2NhcmREYXRlJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRGb2N1cyA9IGVsZW1lbnQuaWQKICAgICAgICB9CiAgICAgICAgdGhpcy5pc0NhcmRGbGlwcGVkID0gZWxlbWVudC5pZCA9PT0gdGhpcy5maWVsZHMuY2FyZEN2dgogICAgICB9KQogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7CiAgICAgICAgdGhpcy5pc0NhcmRGbGlwcGVkID0gIWVsZW1lbnQuaWQgPT09IHRoaXMuZmllbGRzLmNhcmRDdnYKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGlmICghc2VsZi5pc0ZvY3VzZWQpIHsKICAgICAgICAgICAgc2VsZi5jdXJyZW50Rm9jdXMgPSBudWxsCiAgICAgICAgICB9CiAgICAgICAgfSwgMzAwKQogICAgICAgIHNlbGYuaXNGb2N1c2VkID0gZmFsc2UKICAgICAgfSkKICAgIH0pCiAgfSwKICBjb21wdXRlZDogewogICAgY2FyZFR5cGUgKCkgewogICAgICBsZXQgbnVtYmVyID0gdGhpcy5sYWJlbHMuY2FyZE51bWJlcgogICAgICBsZXQgcmUgPSBuZXcgUmVnRXhwKCdeNCcpCiAgICAgIGlmIChudW1iZXIubWF0Y2gocmUpICE9IG51bGwpIHJldHVybiAndmlzYScKCiAgICAgIHJlID0gbmV3IFJlZ0V4cCgnXigzNHwzNyknKQogICAgICBpZiAobnVtYmVyLm1hdGNoKHJlKSAhPSBudWxsKSByZXR1cm4gJ2FtZXgnCgogICAgICByZSA9IG5ldyBSZWdFeHAoJ141WzEtNV0nKQogICAgICBpZiAobnVtYmVyLm1hdGNoKHJlKSAhPSBudWxsKSByZXR1cm4gJ21hc3RlcmNhcmQnCgogICAgICByZSA9IG5ldyBSZWdFeHAoJ142MDExJykKICAgICAgaWYgKG51bWJlci5tYXRjaChyZSkgIT0gbnVsbCkgcmV0dXJuICdkaXNjb3ZlcicKCiAgICAgIHJlID0gbmV3IFJlZ0V4cCgnXjYyJykKICAgICAgaWYgKG51bWJlci5tYXRjaChyZSkgIT0gbnVsbCkgcmV0dXJuICd1bmlvbnBheScKCiAgICAgIHJlID0gbmV3IFJlZ0V4cCgnXjk3OTInKQogICAgICBpZiAobnVtYmVyLm1hdGNoKHJlKSAhPSBudWxsKSByZXR1cm4gJ3Ryb3knCgogICAgICByZSA9IG5ldyBSZWdFeHAoJ14zKD86MChbMC01XXw5KXxbNjg5XVxcZD8pXFxkezAsMTF9JykKICAgICAgaWYgKG51bWJlci5tYXRjaChyZSkgIT0gbnVsbCkgcmV0dXJuICdkaW5lcnNjbHViJwoKICAgICAgcmUgPSBuZXcgUmVnRXhwKCdeMzUoMls4OV18WzMtOF0pJykKICAgICAgaWYgKG51bWJlci5tYXRjaChyZSkgIT0gbnVsbCkgcmV0dXJuICdqY2InCgogICAgICByZXR1cm4gJycgLy8gZGVmYXVsdCB0eXBlCiAgICB9LAogICAgY3VycmVudENhcmRCYWNrZ3JvdW5kICgpIHsKICAgICAgaWYgKHRoaXMucmFuZG9tQmFja2dyb3VuZHMgJiYgIXRoaXMuYmFja2dyb3VuZEltYWdlKSB7IC8vIFRPRE8gd2lsbCBiZSBvcHRpbWl6ZWQKICAgICAgICBsZXQgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjUgKyAxKQogICAgICAgIHJldHVybiBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL211aGFtbWVkZXJkZW0vY3JlZGl0LWNhcmQtZm9ybS9tYXN0ZXIvc3JjL2Fzc2V0cy9pbWFnZXMvJHtyYW5kb219LmpwZWdgCiAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZ3JvdW5kSW1hZ2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kSW1hZ2UKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VGb2N1cyAoKSB7CiAgICAgIGxldCB0YXJnZXQgPSB0aGlzLiRyZWZzW3RoaXMuY3VycmVudEZvY3VzXQogICAgICB0aGlzLmZvY3VzRWxlbWVudFN0eWxlID0gdGFyZ2V0ID8gewogICAgICAgIHdpZHRoOiBgJHt0YXJnZXQub2Zmc2V0V2lkdGh9cHhgLAogICAgICAgIGhlaWdodDogYCR7dGFyZ2V0Lm9mZnNldEhlaWdodH1weGAsCiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgke3RhcmdldC5vZmZzZXRMZWZ0fXB4KSB0cmFuc2xhdGVZKCR7dGFyZ2V0Lm9mZnNldFRvcH1weClgCiAgICAgIH0gOiBudWxsCiAgICB9LAogICAgZ2V0SXNOdW1iZXJNYXNrZWQgKGluZGV4LCBuKSB7CiAgICAgIHJldHVybiBpbmRleCA+IDQgJiYgaW5kZXggPCAxNCAmJiB0aGlzLmxhYmVscy5jYXJkTnVtYmVyLmxlbmd0aCA+IGluZGV4ICYmIG4udHJpbSgpICE9PSAnJyAmJiB0aGlzLmlzQ2FyZE51bWJlck1hc2tlZAogICAgfSwKICAgIGNoYW5nZVBsYWNlaG9sZGVyICgpIHsKICAgICAgaWYgKHRoaXMuY2FyZFR5cGUgPT09ICdhbWV4JykgewogICAgICAgIHRoaXMuY3VycmVudFBsYWNlaG9sZGVyID0gdGhpcy5hbWV4Q2FyZFBsYWNlaG9sZGVyCiAgICAgIH0gZWxzZSBpZiAodGhpcy5jYXJkVHlwZSA9PT0gJ2RpbmVyc2NsdWInKSB7CiAgICAgICAgdGhpcy5jdXJyZW50UGxhY2Vob2xkZXIgPSB0aGlzLmRpbmVyc0NhcmRQbGFjZWhvbGRlcgogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VycmVudFBsYWNlaG9sZGVyID0gdGhpcy5kZWZhdWx0Q2FyZFBsYWNlaG9sZGVyCiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuY2hhbmdlRm9jdXMoKQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Card.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Card.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"card-item\" :class=\"{ '-active' : isCardFlipped }\">\n    <div class=\"card-item__side -front\">\n      <div\n        class=\"card-item__focus\"\n        :class=\"{'-active' : focusElementStyle }\"\n        :style=\"focusElementStyle\"\n        ref=\"focusElement\"\n      ></div>\n      <div class=\"card-item__cover\">\n        <img\n          v-if=\"currentCardBackground\"\n          :src=\"currentCardBackground\"\n          class=\"card-item__bg\"\n        />\n      </div>\n      <div class=\"card-item__wrapper\">\n        <div class=\"card-item__top\">\n          <img\n            src=\"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png\"\n            class=\"card-item__chip\"\n          />\n          <div class=\"card-item__type\">\n            <transition name=\"slide-fade-up\">\n              <img\n                :src=\"'https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/' + cardType + '.png'\"\n                v-if=\"cardType\"\n                :key=\"cardType\"\n                alt\n                class=\"card-item__typeImg\"\n              />\n            </transition>\n          </div>\n        </div>\n        <label :for=\"fields.cardNumber\" class=\"card-item__number\" :ref=\"fields.cardNumber\">\n          <template>\n            <span v-for=\"(n, $index) in currentPlaceholder\" :key=\"$index\">\n              <transition name=\"slide-fade-up\">\n                <div class=\"card-item__numberItem\" v-if=\"getIsNumberMasked($index, n)\">*</div>\n                <div\n                  class=\"card-item__numberItem\"\n                  :class=\"{ '-active' : n.trim() === '' }\"\n                  :key=\"currentPlaceholder\"\n                  v-else-if=\"labels.cardNumber.length > $index\"\n                >{{labels.cardNumber[$index]}}</div>\n                <div\n                  class=\"card-item__numberItem\"\n                  :class=\"{ '-active' : n.trim() === '' }\"\n                  v-else\n                  :key=\"currentPlaceholder + 1\"\n                >{{n}}</div>\n              </transition>\n            </span>\n          </template>\n        </label>\n        <div class=\"card-item__content\">\n          <label :for=\"fields.cardName\" class=\"card-item__info\" :ref=\"fields.cardName\">\n            <div class=\"card-item__holder\">{{ $t('card.cardHolder') }}</div>\n            <transition name=\"slide-fade-up\">\n              <div class=\"card-item__name\" v-if=\"labels.cardName.length\" key=\"1\">\n                <transition-group name=\"slide-fade-right\">\n                  <span\n                    class=\"card-item__nameItem\"\n                    v-for=\"(n, $index) in labels.cardName.replace(/\\s\\s+/g, ' ')\"\n                    :key=\"$index + 1\"\n                  >{{n}}</span>\n                </transition-group>\n              </div>\n              <div class=\"card-item__name\" v-else key=\"2\">{{ $t('card.fullName') }}</div>\n            </transition>\n          </label>\n          <div class=\"card-item__date\" ref=\"cardDate\">\n            <label :for=\"fields.cardMonth\" class=\"card-item__dateTitle\">{{ $t('card.expires') }}</label>\n            <label :for=\"fields.cardMonth\" class=\"card-item__dateItem\">\n              <transition name=\"slide-fade-up\">\n                <span v-if=\"labels.cardMonth\" :key=\"labels.cardMonth\">{{labels.cardMonth}}</span>\n                <span v-else key=\"2\">{{ $t('card.MM') }}</span>\n              </transition>\n            </label>\n            /\n            <label for=\"cardYear\" class=\"card-item__dateItem\">\n              <transition name=\"slide-fade-up\">\n                <span v-if=\"labels.cardYear\" :key=\"labels.cardYear\">{{String(labels.cardYear).slice(2,4)}}</span>\n                <span v-else key=\"2\">{{ $t('card.YY') }}</span>\n              </transition>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"card-item__side -back\">\n      <div class=\"card-item__cover\">\n        <img\n          v-if=\"currentCardBackground\"\n          :src=\"currentCardBackground\"\n          class=\"card-item__bg\"\n        />\n      </div>\n      <div class=\"card-item__band\"></div>\n      <div class=\"card-item__cvv\">\n        <div class=\"card-item__cvvTitle\">CVV</div>\n        <div class=\"card-item__cvvBand\">\n          <span v-for=\"(n, $index) in labels.cardCvv\" :key=\"$index\">*</span>\n        </div>\n        <div class=\"card-item__type\">\n          <img\n            :src=\"'https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/' + cardType + '.png'\"\n            v-if=\"cardType\"\n            class=\"card-item__typeImg\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Card',\n  props: {\n    labels: Object,\n    fields: Object,\n    isCardNumberMasked: Boolean,\n    randomBackgrounds: {\n      type: Boolean,\n      default: true\n    },\n    backgroundImage: [String, Object]\n  },\n  data () {\n    return {\n      focusElementStyle: null,\n      currentFocus: null,\n      isFocused: false,\n      isCardFlipped: false,\n      amexCardPlaceholder: '#### ###### #####',\n      dinersCardPlaceholder: '#### ###### ####',\n      defaultCardPlaceholder: '#### #### #### ####',\n      currentPlaceholder: ''\n    }\n  },\n  watch: {\n    currentFocus () {\n      if (this.currentFocus) {\n        this.changeFocus()\n      } else {\n        this.focusElementStyle = null\n      }\n    },\n    cardType () {\n      this.changePlaceholder()\n    }\n  },\n  mounted () {\n    this.changePlaceholder()\n\n    let self = this\n    let fields = document.querySelectorAll('[data-card-field]')\n    fields.forEach(element => {\n      element.addEventListener('focus', () => {\n        this.isFocused = true\n        if (element.id === this.fields.cardYear || element.id === this.fields.cardMonth) {\n          this.currentFocus = 'cardDate'\n        } else {\n          this.currentFocus = element.id\n        }\n        this.isCardFlipped = element.id === this.fields.cardCvv\n      })\n      element.addEventListener('blur', () => {\n        this.isCardFlipped = !element.id === this.fields.cardCvv\n        setTimeout(() => {\n          if (!self.isFocused) {\n            self.currentFocus = null\n          }\n        }, 300)\n        self.isFocused = false\n      })\n    })\n  },\n  computed: {\n    cardType () {\n      let number = this.labels.cardNumber\n      let re = new RegExp('^4')\n      if (number.match(re) != null) return 'visa'\n\n      re = new RegExp('^(34|37)')\n      if (number.match(re) != null) return 'amex'\n\n      re = new RegExp('^5[1-5]')\n      if (number.match(re) != null) return 'mastercard'\n\n      re = new RegExp('^6011')\n      if (number.match(re) != null) return 'discover'\n\n      re = new RegExp('^62')\n      if (number.match(re) != null) return 'unionpay'\n\n      re = new RegExp('^9792')\n      if (number.match(re) != null) return 'troy'\n\n      re = new RegExp('^3(?:0([0-5]|9)|[689]\\\\d?)\\\\d{0,11}')\n      if (number.match(re) != null) return 'dinersclub'\n\n      re = new RegExp('^35(2[89]|[3-8])')\n      if (number.match(re) != null) return 'jcb'\n\n      return '' // default type\n    },\n    currentCardBackground () {\n      if (this.randomBackgrounds && !this.backgroundImage) { // TODO will be optimized\n        let random = Math.floor(Math.random() * 25 + 1)\n        return `https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/${random}.jpeg`\n      } else if (this.backgroundImage) {\n        return this.backgroundImage\n      } else {\n        return null\n      }\n    }\n  },\n  methods: {\n    changeFocus () {\n      let target = this.$refs[this.currentFocus]\n      this.focusElementStyle = target ? {\n        width: `${target.offsetWidth}px`,\n        height: `${target.offsetHeight}px`,\n        transform: `translateX(${target.offsetLeft}px) translateY(${target.offsetTop}px)`\n      } : null\n    },\n    getIsNumberMasked (index, n) {\n      return index > 4 && index < 14 && this.labels.cardNumber.length > index && n.trim() !== '' && this.isCardNumberMasked\n    },\n    changePlaceholder () {\n      if (this.cardType === 'amex') {\n        this.currentPlaceholder = this.amexCardPlaceholder\n      } else if (this.cardType === 'dinersclub') {\n        this.currentPlaceholder = this.dinersCardPlaceholder\n      } else {\n        this.currentPlaceholder = this.defaultCardPlaceholder\n      }\n      this.$nextTick(() => {\n        this.changeFocus()\n      })\n    }\n  }\n}\n</script>\n"]}]}